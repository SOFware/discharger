# Discharger Setup Configuration
# This file defines the setup process for your application
# Customize the configuration based on your project needs

# Application name
app_name: "YourAppName"

# Database configuration
database:
  port: 5432
  name: "db-your-app"  # Docker container name. Rails will use "your-app" for database names
  version: "14"
  password: "postgres"

# Redis configuration (if using Redis)
redis:
  port: 6379
  name: "redis-your-app"
  version: "latest"

# Pre-Rails steps (run BEFORE Rails loads)
# These are for system dependencies and environment setup that must happen
# before bundler/Rails can initialize. Use sparingly.
#
# Built-in pre_steps:
#   - homebrew         # Installs Homebrew if not present
#   - postgresql_tools # Installs PostgreSQL client tools (pg_dump, psql)
#
# Custom pre_steps (run shell commands):
#   - description: "Description of step"
#     command: "shell command to run"
#     condition: "ENV['VAR']"  # Optional: only run if condition is true
#
pre_steps: []
  # - homebrew
  # - postgresql_tools

# Built-in commands to run (empty array runs all available commands)
# Available commands: brew, asdf, git, bundler, yarn, config, docker, env, database
steps:
  - brew
  - asdf
  - git
  - bundler
  - yarn
  - config
  - docker
  - env
  - database

# Custom commands for application-specific setup (run AFTER Rails loads)
custom_steps:
  - description: "Seed application data"
    command: "bin/rails db:seed"

  # Example: Conditional setup based on environment variable
  # - description: "Seed legacy data"
  #   command: "LEGACY_DATA=true bin/rails db:seed"
  #   condition: "ENV['LEGACY_DATA'] == 'true'"

  # Example: Setup external services
  # - description: "Setup Elasticsearch"
  #   command: "bin/rails search:setup"
  #   condition: "defined?(Elasticsearch)"

  # Example: Setup background job processing
  # - description: "Setup Sidekiq"
  #   command: "bundle exec sidekiq -d"
  #   condition: "defined?(Sidekiq)"
